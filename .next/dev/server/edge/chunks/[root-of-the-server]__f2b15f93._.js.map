{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { NextResponse } from \"next/server\"\nimport type { NextRequest } from \"next/server\"\n\n// Protected routes that require authentication\nconst protectedRoutes = [\"/dashboard\", \"/analyze\", \"/history\", \"/profile\", \"/settings\", \"/billing\", \"/upgrade\"]\n\n// Public routes that should redirect to dashboard if authenticated\nconst authRoutes = [\"/login\", \"/signup\"]\n\nexport async function middleware(request: NextRequest) {\n  const { pathname } = request.nextUrl\n\n  const supabase = createServerClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n    {\n      cookies: {\n        getAll() {\n          return request.cookies.getAll()\n        },\n        setAll(cookiesToSet) {\n          cookiesToSet.forEach(({ name, value, options }) => request.cookies.set(name, value))\n        },\n      },\n    }\n  )\n\n  const {\n    data: { session },\n  } = await supabase.auth.getSession()\n\n  const isAuthenticated = !!session\n\n  // Redirect authenticated users away from auth pages\n  if (authRoutes.some((route) => pathname.startsWith(route))) {\n    if (isAuthenticated) {\n      return NextResponse.redirect(new URL(\"/dashboard\", request.url))\n    }\n  }\n\n  // Redirect unauthenticated users from protected routes to login\n  if (protectedRoutes.some((route) => pathname.startsWith(route))) {\n    if (!isAuthenticated) {\n      const redirectUrl = new URL(\"/login\", request.url)\n      redirectUrl.searchParams.set(\"redirect\", pathname)\n      return NextResponse.redirect(redirectUrl)\n    }\n  }\n\n  return NextResponse.next()\n}\n\nexport const config = {\n  matcher: [\"/((?!api|_next/static|_next/image|favicon.ico|.*\\\\.png$|.*\\\\.jpg$|.*\\\\.svg$).*)\"],\n}\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAGA,+CAA+C;AAC/C,MAAM,kBAAkB;IAAC;IAAc;IAAY;IAAY;IAAY;IAAa;IAAY;CAAW;AAE/G,mEAAmE;AACnE,MAAM,aAAa;IAAC;IAAU;CAAU;AAEjC,eAAe,WAAW,OAAoB;IACnD,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,MAAM,WAAW,IAAA,oTAAkB,oKAGjC;QACE,SAAS;YACP;gBACE,OAAO,QAAQ,OAAO,CAAC,MAAM;YAC/B;YACA,QAAO,YAAY;gBACjB,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAAK,QAAQ,OAAO,CAAC,GAAG,CAAC,MAAM;YAC/E;QACF;IACF;IAGF,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EAClB,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU;IAElC,MAAM,kBAAkB,CAAC,CAAC;IAE1B,oDAAoD;IACpD,IAAI,WAAW,IAAI,CAAC,CAAC,QAAU,SAAS,UAAU,CAAC,SAAS;QAC1D,IAAI,iBAAiB;YACnB,OAAO,ySAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,QAAQ,GAAG;QAChE;IACF;IAEA,gEAAgE;IAChE,IAAI,gBAAgB,IAAI,CAAC,CAAC,QAAU,SAAS,UAAU,CAAC,SAAS;QAC/D,IAAI,CAAC,iBAAiB;YACpB,MAAM,cAAc,IAAI,IAAI,UAAU,QAAQ,GAAG;YACjD,YAAY,YAAY,CAAC,GAAG,CAAC,YAAY;YACzC,OAAO,ySAAY,CAAC,QAAQ,CAAC;QAC/B;IACF;IAEA,OAAO,ySAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAkF;AAC9F"}}]
}