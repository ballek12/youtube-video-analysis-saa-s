#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Check ESLint
echo "ğŸ“ Checking code with ESLint..."
pnpm lint --fix
if [ $? -ne 0 ]; then
  echo "âŒ ESLint check failed. Please fix the errors above."
  exit 1
fi

# Check formatting with Prettier
echo "âœ¨ Checking code formatting..."
npx prettier --check . --ignore-path .prettierignore
if [ $? -ne 0 ]; then
  echo "âŒ Prettier check failed. Running formatter..."
  npx prettier --write . --ignore-path .prettierignore
  echo "âœ… Code formatted. Please review changes and commit again."
  exit 1
fi

echo "âœ… All pre-commit checks passed!"
